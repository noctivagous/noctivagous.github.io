<!DOCTYPE html>
<html>
<head>
    <title>Magic Squares</title>

    <style>
body{
font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
font-size:18pt;
}

#mainContainer{
margin:auto;
max-width:800px;
margin-bottom: 100px;
}

h2{
font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
}

h1,h2,h3,h4{
text-transform: capitalize;
margin-top:2em;
}

h3,h4{
color:#444;
}

h3{
font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif

}

h4{
font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif
}

    </style>
</head>
<body>

<div id="mainContainer">

    <h1>Magic Squares</h1>
    <p>Last updated on October 26, 2023.</p>
    <div>


        <h2>Luoshu Square</h2>

<p>The cells of the Luoshu square below have been shaded according
    to their value (relative to the highest number in the square, 9).
    <!-- (This is not common practice but can reveal some properties of the square.)-->
</p>
        <center>
    <canvas id="luoshuCanvas" width="300" height="300"></canvas>
</center>




<h3>Properties of the square</h3>


<h4>The Constant Sum Property of the Lo Shu Square: All Rows, Columns, and Main Diagonals Sum to 15</h4>
   

<ul>
    <li>Each of the three rows {4, 9, 2}, {3, 5, 7}, and {8, 1, 6} adds up to 15.</li>
    <li>Each of the three columns {4, 3, 8}, {9, 5, 1}, and {2, 7, 6} adds up to 15.</li>
    <li>Each of the two main diagonals {4, 5, 6} and {2, 5, 8} adds up to 15.</li>
  </ul>
  

<h4>Alternation of Odd And Even Numbers Around The Square</h4>
<p>

    The center number (5) is
    surrounded by alternating even and odd numbers.
    The corner cells are even while the middle cells are odd.


</p>

<h4>Reflective Symmetry</h4>

The Luoshu Square also has reflective symmetry along its main diagonal from the top-left to the bottom-right.
 If you flip the numbers across this diagonal, you get the same constant sum for each row, column, diagonal (15).

 <pre>
    Original:

    4  9  2
    3  5  7
    8  1  6
    
    Reflected along main diagonal:

    4  3  8
    9  5  1
    2  7  6
 </pre>


<h3>Four Arithmetic Sequences</h3>
<p>The diagonal {4,5,6} is considered an arithmetic sequence because the difference between
    each number is constant (d = 1).  There are four arithmetic sequences
    like this:
    
<!--    An arithmetic sequence is a sequence of numbers in which the difference between consecutive terms is constant. -->
    <!-- This constant difference is known as the "common difference," usually denoted by d.-->

</p>
<!--<p>
    The numbers in each of the two main diagonals, 
    the middle row, and the middle column form individual arithmetic sequences. 
    The common differences for these sequences are unique to each set: 1 for one diagonal, 2 for the middle row, 3 for the other diagonal, and 4 for the middle column.

</p>
-->

<ul>
<li>
Diagonal from top-left to bottom-right: {4, 5, 6} (<b>difference of 1</b>)
</li>
<li>
    Middle row: {3, 5, 7} (<b>difference of 2</b>)
    </li>
<li>
Diagonal from top-right to bottom-left: {2, 5, 8} (<b>difference of 3</b>)
</li>

<li>
Middle column: {9, 5, 1} (<b>difference of 4</b>)
</li>
</ul>

<section>
  
  <h3>The center number, 5, is the mean for each outer pair</h3>
  Source: <u>Legacy of the Luoshu</u> by F. Swetz. 2002)</p>

  
  <p>The center number 5 serves yet another mathematical role in the Lo Shu Square—it functions as the mean or average of each pair of numbers diagonally opposite to each other.</p>
  <math xmlns="http://www.w3.org/1998/Math/MathML">
    <mtext>For the pair (1, 9): </mtext>
    <mfrac>
      <mrow>
        <mn>1</mn>
        <mo>+</mo>
        <mn>9</mn>
      </mrow>
      <mn>2</mn>
    </mfrac>
    <mo>=</mo>
    <mn>5</mn>
  </math>
  <p>
      <math xmlns="http://www.w3.org/1998/Math/MathML">
    <mtext>For the pair (4, 6): </mtext>
    <mfrac>
      <mrow>
        <mn>4</mn>
        <mo>+</mo>
        <mn>6</mn>
      </mrow>
      <mn>2</mn>
    </mfrac>
    <mo>=</mo>
    <mn>5</mn>
  </math>
  <p>
  <math xmlns="http://www.w3.org/1998/Math/MathML">
    <mtext>For the pair (2, 8): </mtext>
    <mfrac>
      <mrow>
        <mn>2</mn>
        <mo>+</mo>
        <mn>8</mn>
      </mrow>
      <mn>2</mn>
    </mfrac>
    <mo>=</mo>
    <mn>5</mn>
  </math>
  <p>
  <math xmlns="http://www.w3.org/1998/Math/MathML">
    <mtext>For the pair (3, 7): </mtext>
    <mfrac>
      <mrow>
        <mn>3</mn>
        <mo>+</mo>
        <mn>7</mn>
      </mrow>
      <mn>2</mn>
    </mfrac>
    <mo>=</mo>
    <mn>5</mn>
  </math>
  <p>In each case, the average of the two numbers is 5, which is the central number of the square. 
    
</section>


<h3>Symmetrical Differences and Factor Relationships in the Lo Shu Square</h3>

<ul>
    <li><strong>Opposing Row Differences:</strong> In the Luoshu Square, the differences between opposing cells in each row are 2, 4, and 2.
      <ul>
        <li>Example: For the first row, 4 - 2 = 2; for the second row, 7 - 3 = 4; for the third row, 8 - 6 = 2.</li>
      </ul>
    </li>
    <li><strong>Opposing Column Differences:</strong> The differences between opposing cells in each column are 4, 8, and 4.
      <ul>
        <li>Example: For the first column, 8 - 4 = 4; for the second column, 9 - 1 = 8; for the third column, 6 - 2 = 4.</li>
      </ul>
    </li>
    <li><strong>Factor Relationship:</strong> The differences in each column are exactly twice the differences in each corresponding row.
        <!-- The differences between opposing cells in the columns are twice the differences in the rows.-->
      <ul>
        <li>Example: The differences in the columns (4, 8, 4) are each twice the differences in the rows (2, 4, 2).</li>
      </ul>
    </li>
  </ul>
  

  <h3>Descending Products of Corner and Center Adjacent Cells</h3>

  <p>The products of the corner and center-adjacent numbers result in descending values:</p>
 
  <pre>
    <b>4</b>  <b>9</b>  2
    <b>3</b>  <b>5</b>  7
    <b>8</b>  <b>1</b>  6
    </pre>
  <ul>
    <li>The top-left and top-right corners {4, 9} yield a product of (4 &times; 9 = 36).</li>
    <li>The center and its top-adjacent cell {3, 5} give a product of (3 &times; 5 = 15).</li>
    <li>The bottom-left and bottom-right corners {1, 8} result in a product of (1 &times; 8 = 8).</li>
  </ul>
  
  <p>These products—36, 15, and 8—are in descending order.</p>
  
  <p>Continuing this, if you subtract the number from the rightmost corner column from the product of the diagonal corners, you get an even number:</p>

  <ul>
    <li>Subtracting 2 from the product of 4 and 9: (4 &times; 9 - 2 = 36 - 2 = 34)</li>
    <li>Subtracting 7 from the product of 3 and 5: (3 &times; 5 - 7 = 15 - 7 = 8)</li>
    <li>Subtracting 6 from the product of 1 and 8: (1 &times; 8 - 6 = 8 - 6 = 2)</li>
  </ul>
  
  <p>These results—34, 8, and 2—are all even numbers.</p>

  <h3>Addition Patterns Involving the Center Cell and Adjacency in the Lo Shu Square</h3>
<p>Another characteristic of the Luoshu Square 
  involves the center number 5 and its additive relationships with adjacent cells. 
  When 5 is added to each of its adjacent cells, the digits of the resulting two-digit numbers 
  (if applicable) are found as nearby numbers in the square.</p>
<ul>
  <li>Adding 5 and 8: (5 + 8 = 13). The digits 1 and 3 are nearby numbers to 8.</li>
  <li>Adding 5 and 6: (5 + 6 = 11). The digit 1 is near the number 5.</li>
  <li>Adding 5 and 7: (5 + 7 = 12). The digits 1 and 2 are nearby numbers to 5.</li>
  <li>Adding 5 and 9: (5 + 9 = 14). The digits 1 and 4 are nearby numbers to 5.</li>
  <li>Adding 5 and 3: (5 + 3 = 8). The resulting 8 is a nearby number to 3.</li>
  <li>Adding 5 and 1: (5 + 1 = 6). The resulting 6 is a nearby number to 1.</li>
</ul>
<p>In all these cases, the sum or its individual digits can be found in cells adjacent or nearby 
  to the numbers being added.</p>


  

<h3>Additional Notes</h3>

<p>(Partly sourced from: <u>Legacy of the Luoshu</u>by F. Swetz. 2002)</p>

<h4>9 and 5</h4>

<p>
9 has special significance in ancient China, utilized and recurring
frequently in ancient Chinese culture.  It is considered
the ultimate, infinite, or the bounds of anything, and also the end
of any cycle before a new one begins.  5 is considered
the center of any given matter.  9 times 5 = 45, but also
the sum of all digits in the Luoshu square (1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9) adds up to 45.
Also, the digits of 45, 4 and 5, when added sum to 9 (Swetz).
In the sequence {1,2,3,4,5,6,7,8,9}, 5 is in the center (Swetz).
China has also been dubbed the "Middle Kingdom".
</p>

<p>
  The square is an order 3 square with the center being 5.   According to Swetz,
  the order of anny odd-orderd magic square multiplied by the center (in this case 5) will equal
  the constant sum of the square (15).  Additionally, 5 x 3^2 = 45.

</p>




</div>

<div>
    <h2>Dürer Square</h2>
    
    <p>
    This is discussing Albrecht Dürer's 4x4 magic square, as seen in his engraving "Melancholia I".
  </p>

<p>Again, the cells of the magic square 
    below have been shaded according to their value (relative to the highest number in the square, 16).
</p>

    <center>
    <canvas id="durerMagicSquareCanvas" width="400" height="400"></canvas>
</center>


<section>
  <h2>Absolute Differences in Top and Bottom Rows, and Outer Columns of Durer's Magic Square</h2>
  <p>The absolute differences between the cells in the top row {16,3,2,13} and bottom row {4,15,14,1}, as well as between 
    the cells in the far-left 
    {16,5,9,4}
    and far-right columns {13,8,12,1}, form a consistent pattern.</p>
  
    <p>Absolute difference between each cell in the top row and its corresponding cell in the bottom row: |16 - 4|, |3 - 15|, |2 - 14|, |13 - 1| all yield a difference of 12.</p>
  
    <p>Absolute difference between each cell in the far-left column and its corresponding cell in the far-right column: |16 - 13|, |5 - 8|, |9 - 12|, |4 - 1| all yield a difference of 3.</p>
  
   

</section>

</div>





    <script>
        var luoshuCanvas = document.getElementById('luoshuCanvas');
        var durerMagicSquareCanvas = document.getElementById('durerMagicSquareCanvas');
        var ctx1 = luoshuCanvas.getContext('2d');
        var ctx2 = durerMagicSquareCanvas.getContext('2d');

        // Dürer's magic square
        var durerSquare = [
            [16, 3, 2, 13],
            [5, 10, 11, 8],
            [9, 6, 7, 12],
            [4, 15, 14, 1]
        ];

        // Lo Shu Square
        var luoShuSquare = [
            [4, 9, 2],
            [3, 5, 7],
            [8, 1, 6]
        ];

        // Dimensions of each cell
        var cellWidth = 100;
        var cellHeight = 100;

        // Draw a square
        function drawSquare(square, xOffset, ctx) {
            for(var i = 0; i < square.length; i++) {
                for(var j = 0; j < square[i].length; j++) {
                    // Calculate the grayscale color
                    var maxVal = Math.max(...square.flat());
                    var grayValue = 255 - Math.floor((square[i][j] / maxVal) * 255);
                    var grayColor = `rgb(${grayValue}, ${grayValue}, ${grayValue})`;

                    // Draw the cell
                    ctx.fillStyle = grayColor;
                    ctx.fillRect(j * cellWidth + xOffset, i * cellHeight, cellWidth, cellHeight);

                    // Annotate the cell with its value
                    ctx.fillStyle = "white";
                    ctx.font = "30px Arial";
                    ctx.textAlign = "center";
                    ctx.textBaseline = "middle";
                    ctx.fillText(square[i][j], j * cellWidth + cellWidth / 2 + xOffset, i * cellHeight + cellHeight / 2);
                }
            }
        }

        // Draw Durer's Square starting at x = 0
        drawSquare(durerSquare, 0,ctx2);

        // Draw Lo Shu Square 
        drawSquare(luoShuSquare, 0,ctx1);
    </script>
</div>
</body>
</html>
