<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>Interactive Code Document Demo</title> 



  
    </head> <body> 

      <!--
      CODE PROJECT DOCUMENT TYPES 
Code document.
Document Navigation Group - custom arrangement of multiple documents, with available combinations of browsing controls (like custom-arranged HTML iframes).
GUI document.
Tabular data (CSV, spreadsheet).
Image asset folder (gallery).
Asset folder (holds any type of file).

Availability of custom nesting of subn-avigation for organizing code project.



      -->
        
      <link rel="stylesheet" href="styles/editor.css">


      
      <div id="project-tabs" >
        <button class="project-tab active" data-tab="code" kbshortcut="^1">Project Code</button>
        <button class="project-tab" data-tab="output" kbshortcut="^2">Output</button>
      </div>

      <div id="project-tab-content">
        <div id="code-tab-content">
          <div id="project-container">
            <div id="document-browser">
              <div id="project-title">
                <!-- The project title will be dynamically inserted here -->
              </div>
              <ul id="document-tabs"></ul>
            </div>
            <div id="code-document-container">
          <codeProject  
          title="Calculator Demo"
          author="Your Name"
          created="2024-04-16"
          lastModified="2025-04-16"
          version="1.0"
          language="custom"
          description="An interactive code project for a Calculator application with basic arithmetic and advanced functions."
          presentation="default"
          navigation="default"
          theme="light"
          editable="true"
          collaborative="false">
        
          <!-- Code Document 1: Calculator Core -->
          <codeDocument
            id="calc-core-document"
            created="2024-04-16"
            lastModified="2025-04-16"
            description="Defines the Calculator class with its basic arithmetic methods.">
            <class>
              <name>
                <className>Calculator</className>
                <classExtendsName>Object</classExtendsName>
              </name>
              <documentation>A simple calculator class for performing basic arithmetic operations.</documentation>
              <codebody>
                <statement>
                  <variable>
                    <type>
                    <typeSymbol>#</typeSymbol>
                    <typeName>int</typeName>
                    </type>
                    <name>currentValue</name>
                  </variable>
                </statement>
                
                <!-- Constructor -->
                <function collapsed="true" functionRole="constructor">
                  <parameters>
                    <parameter>
                      <type>
                        <typeSymbol>#</typeSymbol>
                        <typeName>int</typeName>
                      </type>
                      <name>initialValue</name>
                    </parameter>
                  </parameters>
                  <name>init</name>
                  <documentation>Initializes the calculator with an initial value.</documentation>
                  <codeBody>
                    <statement>
                      <expression>
                        <variable>
                          <typeSymbol>#</typeSymbol>
                          <name>currentValue</name>
                        </variable>
                        = 
                        <expression>
                          <variable>
                            <typeSymbol>#</typeSymbol>
                            <name>initialValue</name>
                          </variable>
                        </expression>
                      </expression>
                    </statement>
                  </codeBody>
                </function>
        
                <group presentation="tabifyingView">
                <!-- Addition -->
                <function collapsed="false">
                  <parameters>
                    <parameter>
                      <type>
                        <typeSymbol>#</typeSymbol>
                        <typeName>int</typeName>
                      </type>
                      <name>operand</name>
                    </parameter>
                  </parameters>
                  <name>add <return-type>#</return-type></name>
                  <documentation>Adds the given operand to the current value.</documentation>
                  <codeBody>
                    <statement>
                      <expression>
                        <variable>
                          <typeSymbol>#</typeSymbol>
                          <name>currentValue</name>
                        </variable>
                        =
                        <expression>
                          <variable>
                            <typeSymbol>#</typeSymbol>
                            <name>currentValue</name>
                          </variable>
                          +
                          <variable>
                            <typeSymbol>#</typeSymbol>
                            <name>operand</name>
                          </variable>
                        </expression>
                      </expression>
                    </statement>
                    <statement>
                    <return>
                      <name>return</name>
                      <expression>
                        <variable>
                          <typeSymbol>#</typeSymbol>
                          <name>currentValue</name>
                        </variable>
                      </expression>
                    </return>
                  </statement>
                  </codeBody>
                </function>
                
                <!-- Subtraction -->
                <function collapsed="false">
                  <parameters>
                    <parameter>
                      <type>
                        <typeSymbol>#</typeSymbol>
                        <typeName>int</typeName>
                      </type>
                      <name>operand</name>
                    </parameter>
                  </parameters>
                  <name>subtract <return-type>#</return-type></name>
                  <documentation>Subtracts the given operand from the current value.</documentation>
                  <codeBody>
                    <statement>
                      <expression>
                        <variable>
                          <typeSymbol>#</typeSymbol>
                          <name>currentValue</name>
                        </variable>
                        =
                        <expression>
                          <variable>
                            <typeSymbol>#</typeSymbol>
                            <name>currentValue</name>
                          </variable>
                          -
                          <variable>
                            <typeSymbol>#</typeSymbol>
                            <name>operand</name>
                          </variable>
                        </expression>
                      </expression>
                    </statement>
                    <statement>
                    <return>
                      <name>return</name>
                      <expression>
                        <variable>
                          <typeSymbol>#</typeSymbol>
                          <name>currentValue</name>
                        </variable>
                      </expression>
                    </return>
                  </statement>
                  </codeBody>
                </function>

                <!-- Multiplication -->
                <function collapsed="false">
                  <parameters>
                    <parameter>
                      <type>
                        <typeSymbol>#</typeSymbol>
                        <typeName>int</typeName>
                      </type>
                      <name>operand</name>
                    </parameter>
                  </parameters>
                  <name>multiply <return-type>#</return-type></name>
                  <documentation>Multiplies the given operand by the current value.</documentation>
                  <codeBody>
                    <statement>
                      <expression>
                        <variable>
                          <typeSymbol>#</typeSymbol>
                          <name>currentValue</name>
                        </variable>
                        =
                        <expression>
                          <variable>
                            <typeSymbol>#</typeSymbol>
                            <name>currentValue</name>
                          </variable>
                          *
                          <variable>
                            <typeSymbol>#</typeSymbol>
                            <name>operand</name>
                          </variable>
                        </expression>
                      </expression>
                    </statement>
                    <statement>
                    <return>
                      <name>return</name>
                      <expression>
                        <variable>
                          <typeSymbol>#</typeSymbol>
                          <name>currentValue</name>
                        </variable>
                      </expression>
                    </return>
                  </statement>
                  </codeBody>
                </function>
                
                <!-- Division -->
                <function collapsed="false">
                  <parameters>
                    <parameter>
                      <type>
                        <typeSymbol>#</typeSymbol>
                        <typeName>int</typeName>
                      </type>
                      <name>operand</name>
                    </parameter>
                  </parameters>
                  <name>divide <return-type>#</return-type></name>
                  <documentation>Divides the given operand by the current value.</documentation>
                  <codeBody>
                    <statement>
                      <expression>
                        <variable>
                          <typeSymbol>#</typeSymbol>
                          <name>currentValue</name>
                        </variable>
                        =
                        <expression>
                          <variable>
                            <typeSymbol>#</typeSymbol>
                            <name>currentValue</name>
                          </variable>
                          /
                          <variable>
                            <typeSymbol>#</typeSymbol>
                            <name>operand</name>
                          </variable>
                        </expression>
                      </expression>
                    </statement>
                    <statement>
                    <return>
                      <name>return</name>
                      <expression>
                        <variable>
                          <typeSymbol>#</typeSymbol>
                          <name>currentValue</name>
                        </variable>
                      </expression>
                    </return>
                  </statement>
                  </codeBody>
                </function>
                

              </group>

              </codebody>
            </class>
          </codeDocument>
        
          <!-- Code Document 2: Advanced Functions & UI Interactivity -->
          <codeDocument
            id="calc-ui-document"
            created="2024-04-16"
            lastModified="2025-04-16"
            description="Defines memory functions, UI update routines, and event handlers for Calculator interactivity.">
            <!-- Memory Operations -->
            <function collapsed="true">
              <parameters>
                <parameter>
                  <type>
                    <typeSymbol>#</typeSymbol>
                    <typeName>float</typeName>
                  </type>
                  <name>value</name>
                </parameter>
              </parameters>
              <name>storeMemory</name>
              <documentation>Stores the specified value in the calculator's memory.</documentation>
              <codeBody>
                <statement>
                  <expression>
                    <variable>
                      <typeSymbol>#</typeSymbol>
                      <name>memory</name>
                    </variable>
                    =
                    <variable>
                      <typeSymbol>#</typeSymbol>
                      <name>value</name>
                    </variable>
                  </expression>
                </statement>
              </codeBody>
            </function>
            
            <function collapsed="true">
              <parameters></parameters>
              <name>recallMemory <return-type>#</return-type></name>
              <documentation>Recalls the stored memory value.</documentation>
              <codeBody>
                <statement>
                  <return>
                    <name>return</name>
                    <expression>
                      <variable>
                        <typeSymbol>#</typeSymbol>
                        <name>memory</name>
                      </variable>
                    </expression>
                  </return>
                </statement>
              </codeBody>
            </function>
            
            <!-- UI Update Function -->
            <function collapsed="false">
              <parameters>
                <parameter>
                  <type>
                    <typeSymbol>$</typeSymbol>
                    <typeName>string</typeName>
                  </type>
                  <name>displayText</name>
                </parameter>
              </parameters>
              <name>updateDisplay <return-type>∅</return-type></name>
              <documentation>Updates the Calculator UI with the provided display text.</documentation>
              <codeBody>
                <statement>
                  <expression>
                    <functionCall>
                      <typeSymbol>ƒ</typeSymbol>
                      <name>setDisplayValue</name>
                      <parameters>
                        <parameter>
                          <typeSymbol>$</typeSymbol>
                          <name>displayText</name>
                        </parameter>
                      </parameters>
                    </functionCall>
                  </expression>
                </statement>
              </codeBody>
            </function>
            
            <!-- Event Handling -->
            <function collapsed="false">
              <parameters></parameters>
              <name>handleButtonPress <return-type>∅</return-type></name>
              <documentation>Processes UI button press events for digit and operation inputs.</documentation>
              <codeBody>
                <statement>
                  <expression>
                    <variable>
                      <typeSymbol>$</typeSymbol>
                      <name>input</name>
                    </variable>
                    =
                    <functionCall>
                      <typeSymbol>ƒ</typeSymbol>
                      <name>readButtonInput</name>
                      <parameters></parameters>
                    </functionCall>
                  </expression>
                </statement>
                <statement>
                  <expression>
                    <functionCall>
                      <typeSymbol>ƒ</typeSymbol>
                      <name>processInput</name>
                      <parameters>
                        <parameter>
                          <typeSymbol>$</typeSymbol>
                          <name>input</name>
                        </parameter>
                      </parameters>
                    </functionCall>
                  </expression>
                </statement>
              </codeBody>
            </function>
            
            <!-- Advanced Operation: Percentage Calculation -->
            <function collapsed="false">
              <parameters>
                <parameter>
                  <type>
                    <typeSymbol>#</typeSymbol>
                    <typeName>int</typeName>
                  </type>
                  <name>percentValue</name>
                </parameter>
              </parameters>
              <name>calculatePercentage <return-type>#</return-type></name>
              <documentation>Calculates the new current value after applying a percentage adjustment.</documentation>
              <codeBody>
                <statement>
                  <expression>
                    <variable>
                      <typeSymbol>#</typeSymbol>
                      <name>currentValue</name>
                    </variable>
                    =
                    <expression>
                      <variable>
                        <typeSymbol>#</typeSymbol>
                        <name>currentValue</name>
                      </variable>
                      *
                      <variable>
                        <typeSymbol>#</typeSymbol>
                        <name>percentValue</name>
                      </variable>
                      / 100
                    </expression>
                  </expression>
                </statement>
                <statement>
                  <return>
                    <name>return</name>
                    <expression>
                      <variable>
                        <typeSymbol>#</typeSymbol>
                        <name>currentValue</name>
                      </variable>
                    </expression>
                  </return>
                </statement>
              </codeBody>
            </function>
          </codeDocument>
        
        </codeProject>
      </div>
    </div>

      </div>
<div id="output-tab-content" style="display:none;">
  <div id="output-viewport" >
    Program output will appear here.
  </div>
</div>
</div>



<div id="key-command-menu">
  <div style="font-weight:bold; margin-bottom:8px;">Key Commands</div>
  <div id="key-command-list"></div>


<div id="hover-info-menu">
  <!-- Populated by JS -->
</div>


<!-- Selection Info Menu -->
<div id="selection-info-menu">
  <div class="selection-info-header">Selection Info</div>
  <div id="selection-info-list"></div>
</div>

<!-- Include jQuery and jQuery UI -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>



<script src="scripts/nctbgpatterns.js"></script>
<script src="scripts/code-elements-schema.js"></script>
<script src="scripts/menus-keycommands.js"></script>
<script src="scripts/editor.js"></script>

<script>
  document.addEventListener('DOMContentLoaded', function() {

    bgPatterns.observe('codedocument', {
      preset: 'dotted',
      strokeColor: '#000',
      strokeWidth: 1,
      spacing: 4,
      angle: -45,
      backgroundColor: '#555'
    });

    bgPatterns.observe('statement', {
      preset: 'dotted',
      strokeColor: '#000',
      strokeWidth: 1,
      spacing: 4,
      angle: -45,
      backgroundColor: '#330bc4'
    });

    

    bgPatterns.observe('body', {
  preset: 'diagonal-solid',
  strokeColor: '#222',
  strokeWidth: 2,
  spacing: 5,
  angle:0,
  backgroundColor: '#111'
});


    bgPatterns.observe('function > codebody', {
      "preset": "diagonal-solid",
  "angle": 90,
  "strokeColor": "#333",
  "strokeWidth": 1,
  "spacing": 3,
  "dashArray": "0",
  "backgroundColor": "black",
  "xOffset": 0,
  "yOffset": 0
    });

    

    


    bgPatterns.observe('class', {
      preset: 'cross-hatch',
      strokeColor: '#444',
      strokeWidth: 1,
      spacing: 5,
      angle: 45,
      backgroundColor: '#666'
    });
  
    bgPatterns.observe('group', {
      preset: 'cross-hatch',
      strokeColor: '#bdbdbd',
      strokeWidth: 1,
      spacing: 5,
      angle: 45,
      
      backgroundColor: '#727272'
    });
  
    bgPatterns.observe('function', {
      preset: 'diagonal-solid',
      strokeColor: '#e9ad5f',
      strokeWidth: 2,
      spacing: 3,
      angle:-35,
      backgroundColor: '#986300'
    });

    bgPatterns.observe('functioncall', {
      preset: 'diagonal-solid',
      strokeColor: '#e9ad5f',
      strokeWidth: 2,
      spacing: 3,
      angle:-35,
      backgroundColor: '#986300'
    });

    
  });
  </script>

<script>
$(document).ready(function(){
  // Place this after your DOM is ready
$(function() {
  // Initialize collapse state for all <function> elements
  $('function').each(function() {
    const $fn = $(this);
    const isCollapsed = $fn.attr('collapsed') === 'true';
    $fn.children('codebody').toggle(!isCollapsed);
  });

  
});

});

document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('codeBody').forEach(codeBody => {
    // Only wrap if not already wrapped
    if (!codeBody.querySelector('.sortable-container')) {
      const wrapper = document.createElement('div');
      wrapper.className = 'sortable-container';
      // Move all direct children into the wrapper
      Array.from(codeBody.children).forEach(child => wrapper.appendChild(child));
      codeBody.appendChild(wrapper);
    }
  });
});

$(function() {
  $('.sortable-container').sortable({
    items: '> *', // All direct children (your code elements)
    handle: '> name', // Drag by the <name> child if you want
    placeholder: "sortable-placeholder",
    update: function(event, ui) {
      // Optionally call your documentUIDidChange() or similar update routine here
      documentUIDidChange && documentUIDidChange();
    }
  });
});


</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const tabs = document.querySelectorAll('.project-tab');
    const codeContent = document.getElementById('code-tab-content');
    const outputContent = document.getElementById('output-tab-content');
    tabs.forEach(tab => {
      tab.addEventListener('click', function() {
        tabs.forEach(t => t.classList.remove('active'));
        this.classList.add('active');
        if (this.dataset.tab === 'code') {
          codeContent.style.display = '';
          outputContent.style.display = 'none';
        } else {
          codeContent.style.display = 'none';
          outputContent.style.display = '';
        }
      });
    });
  });
  </script>


<script>
  document.addEventListener('DOMContentLoaded', function() {
  // Place this after your DOM is ready
document.addEventListener('keydown', function(e) {
  // Build the shortcut string for this event
  let shortcut = '';
  if (e.ctrlKey) shortcut += '^';
  if (e.shiftKey) shortcut += '$';
  if (e.metaKey) shortcut += '@';
  if (e.altKey) shortcut += '~';
  // Use e.key for the key pressed (normalize to lower case for letters)
  let key = e.key;
  if (key.length === 1) key = key.toLowerCase();
  shortcut += key;

  // Find any element with matching kbshortcut
  const match = document.querySelector(`[kbshortcut="${shortcut}"]`);
  if (match) {
    // If it's a tab, trigger click
    match.click();
    e.preventDefault();
  }
});

});

function showKbShortcutsInTitles() {
  document.querySelectorAll('[kbshortcut]').forEach(el => {
    const shortcut = el.getAttribute('kbshortcut');
    if (!shortcut) return;
    // Human-readable version
    let label = shortcut
      .replace(/\^/g, 'Ctrl+')
      .replace(/\$/g, 'Shift+')
      .replace(/@/g, 'Cmd+')
      .replace(/~/g, 'Opt+');
    // Add to title (tooltip)
    if (!el.title || !el.title.includes(label)) {
      el.title = (el.title ? el.title + ' ' : '') + `[${label}]`;
    }
    // If it's a button, append to its visible label (if not already present)
    if (el.tagName === 'BUTTON') {
      // Only add if not already present
      if (!el.textContent.includes(`[${label}]`)) {
        el.textContent = el.textContent.trim() + ` [${label}]`;
      }
    }
  });
}
// Call after DOM is ready
document.addEventListener('DOMContentLoaded', showKbShortcutsInTitles);

document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('typeSymbol').forEach(ts => {
    const txt = ts.textContent.trim();
    if (txt === '#') {
      ts.style.backgroundColor = 'green';
      ts.style.color = 'black';
    } else if (txt === '#.') {
      ts.style.backgroundColor = '#326ba8';
      ts.style.color = 'black';
    }
    else if (txt === '$') {
      ts.style.backgroundColor = 'purple';
      ts.style.color = 'black';
    }
  });
});
</script>

<script>
$(document).ready(function () {
  // Get the project title from the <codeProject> element
  const projectTitle = $('codeProject').attr('title') || 'Untitled Project';

  // Insert the project title into the #project-title div
  $('#project-title').text(projectTitle);

  // Find all <codeDocument> elements
  const codeDocuments = $('codeDocument');

  // Generate tabs dynamically
  codeDocuments.each(function (index) {
    const docId = $(this).attr('id');
    const docDescription = $(this).attr('description') || docId || `Document ${index + 1}`;

    // Add a tab for each document
    $('#document-tabs').append(`
      <li>
        <button class="document-tab" data-doc="${docId}"><h3>${docId}</h3>${docDescription}</button>
      </li>
    `);
  });

  // Show the first document by default
  codeDocuments.addClass('hidden');
  codeDocuments.first().removeClass('hidden').addClass('active');
  $('#document-tabs button').first().addClass('active');

  // Handle tab clicks
  $('#document-tabs').on('click', '.document-tab', function () {
    const docId = $(this).data('doc');

    // Highlight the active tab
    $('#document-tabs button').removeClass('active');
    $(this).addClass('active');

    // Show the selected document and hide others
    codeDocuments.removeClass('active').addClass('hidden');
    $(`#${docId}`).removeClass('hidden').addClass('active');
  });
});</script>

   </body> </html>