<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>Interactive Code Document Demo</title> 



  
    </head> <body> 
        
      <link rel="stylesheet" href="styles/editor.css">

      <div id="project-tabs" >
        <button class="project-tab active" data-tab="code" kbshortcut="^1">Project Code</button>
        <button class="project-tab" data-tab="output" kbshortcut="^2">Output</button>
      </div>
      <div id="project-tab-content">
        <div id="code-tab-content">
   
        <codeProject  
        title="Calculator Demo"
        author="Your Name"
        created="2024-04-16"
        lastModified="2025-04-16"
        version="1.0"
        language="custom"
        description="A demo interactive code project for a calculator app."
        presentation="default"
        navigation="default"
        theme="light"
        editable="true"
        collaborative="false">

        <codeDocument
        id="main-code-document"
        created="2024-04-16"
        lastModified="2025-04-16"
        description="The calculator class and its methods."
        presentation="default"
        navigation="default"
        columns="2"
        theme="light"
        editable="true"
        collaborative="false"
        class="interactive-code-doc"
        data-purpose="code-editor-demo"
        data-language="custom"
        data-version="1.0"
        >
    
         

    <!-- Class Demo: A Calculator class with methods -->
    <class>
      <name><className>Calculator</className><classExtendsName>Object</classExtendsName></name>
      <documentation>A simple calculator class with add and subtract methods.</documentation>

      <codebody>
      <statement>
        <variable>
          <typeSymbol>#</typeSymbol>
          <name>currentValue</name>
        </variable>
      </statement>
      
      <!-- Constructor (init function) -->
     
      <function collapsed="true" functionRole="constructor">
        <role>
          <roleSymbol>c</roleSymbol>
          <roleType>constructor</roleType>
        </role>
        <parameters>
          <parameter>
            <type>
              <typeSymbol>#</typeSymbol>
              <typeName>int</typeName>
            </type>
            <name>initialDisplayValue</name>
          </parameter>
        </parameters>
        <name>init</name>
        <documentation>Initializes the calculator with an initial value.</documentation>
        <codeBody>
          <statement>
            <expression>
              <variable>
                <typeSymbol>#</typeSymbol>
                <name>currentValue</name>
              </variable> = 
              <expression>
                <functionCall>
                  <typeSymbol>ƒ</typeSymbol>
                  <name>getInitialValue</name>
                  <parameters></parameters>
                </functionCall>
              </expression>
            </expression>
          </statement>
        </codeBody>
      </function>
    
    
      <group presentation="tabifyingView">
        <!-- Function Demo: Parameters appear above the function name with type symbols -->
        <function>
          <parameters>
            <parameter>
              <type>
                <typeSymbol>#</typeSymbol>
                <typeName>int</typeName>
              </type>
              <name>a</name>
            </parameter>
            <parameter>
              <type>
                <typeSymbol>#</typeSymbol>
                <typeName>int</typeName>
              </type>
              <name>b</name>
            </parameter>
          </parameters>
          
          <name>sum <return-type>#</return-type></name>
          
            
    
          <documentation>Returns the sum of two integers.</documentation>
          <codeBody>
            <statement>
                
            <return>
              <name>return</name>
              <expression><variable>
                <type>
                  <typeSymbol>#</typeSymbol>
                  <typeName>int</typeName>
                </type>            
                <name>a</name>
              </variable> + <variable>
                <type>
                  <typeSymbol>#</typeSymbol>
                  <typeName>int</typeName>
                </type>            
                <name>b</name>
              </variable></expression>
              
            </return>
          </statement>
          </codeBody>
        </function>
        <function>
          <parameters>
            <parameter>
              <type>
                <typeSymbol>#</typeSymbol>
                <typeName>int</typeName>
              </type>
              <name>a</name>
            </parameter>
            <parameter>
              <type>
                <typeSymbol>#</typeSymbol>
                <typeName>int</typeName>
              </type>
              <name>b</name>
            </parameter>
          </parameters>
          <name>product <return-type>#</return-type></name>
          <documentation>Returns the sum of two integers.</documentation>
          
          <codeBody>
            <statement>
              <return>
                <name>return</name>
                <expression>
                  <variable>
                    <type>
                      <typeSymbol>#</typeSymbol>
                      <typeName>int</typeName>
                    </type>
                    <name>a</name>
                  </variable> 
                  <operation>*</operation> 
                  <variable>
                    <type>
                      <typeSymbol>#</typeSymbol>
                      <typeName>int</typeName>
                    </type>
                    <name>b</name>
                  </variable>
                </expression>
              </return>
            </statement>
          </codeBody>
        </function>
        <function>
          <parameters>
            <parameter>
              <type>
                <typeSymbol>#</typeSymbol>
                <typeName>int</typeName>
              </type>
              <name>a</name>
            </parameter>
            <parameter>
              <type>
                <typeSymbol>#</typeSymbol>
                <typeName>int</typeName>
              </type>
              <name>b</name>
            </parameter>
          </parameters>
          <name>quotient <return-type>#</return-type></name>
          <documentation>Returns the sum of two integers.</documentation>
          
          <codeBody>
            <statement>
              <return>
                <name>return</name>
                <expression>
                  <variable>
                    <type>
                      <typeSymbol>#</typeSymbol>
                      <typeName>int</typeName>
                    </type>
                    <name>a</name>
                  </variable> 
                  <operation>/</operation> 
                  <variable>
                    <type>
                      <typeSymbol>#</typeSymbol>
                      <typeName>int</typeName>
                    </type>
                    <name>b</name>
                  </variable>
                </expression>
              </return>
            </statement>
          </codeBody>
        </function>
      
        <function>
          <parameters>
            <parameter>
              <type>
                <typeSymbol>#</typeSymbol>
                <typeName>int</typeName>
              </type>
              <name>x</name>
            </parameter>
            <parameter>
              <type>
                <typeSymbol>#</typeSymbol>
                <typeName>int</typeName>
              </type>
              <name>y</name>
            </parameter>
          </parameters>
          <name>difference <return-type>#</return-type></name>
          <documentation>subtracts one number from the other.</documentation>
          
          <codeBody>
            <statement>
              <return>
                <name>return</name>
                <expression>
                  <variable>
                    <type>
                      <typeSymbol>#</typeSymbol>
                      <typeName>int</typeName>
                    </type>
                    <name>x</name>
                  </variable> 
                  <operation>-</operation> 
                  <variable>
                    <type>
                      <typeSymbol>#</typeSymbol>
                      <typeName>int</typeName>
                    </type>
                    <name>y</name>
                  </variable>
                </expression>
              </return>
            </statement>
          </codeBody>
        </function>
   

      </group>
      <!-- Existing methods -->


    
  <!-- Loop Demo: A function containing a loop -->
  <function collapsed="true">
    <parameters></parameters>
    <name>printNumbers <return-type>∅</return-type></name>
    
    <documentation>Prints numbers from 0 to 9.</documentation>
    
    <codeBody>
      <loop>
        <initialization>
          <variable>
            <typeSymbol>#</typeSymbol>
            <name>i</name>
          </variable>
          <expression>= 0</expression>
        </initialization>
        <condition>
          <expression>i &lt; 10</expression>
        </condition>
        <increment>
          <expression>i++</expression>
        </increment>
        <codeBody>
          <statement>
            <expression>print(i)</expression>
          </statement>
        </codeBody>
      </loop>
    </codeBody>
  </function>
  
          <!-- Function Demo: Supports float and string parameters with distinct symbols -->
          <function collapsed="true">
            <parameters>
              <parameter>
                <type>
                  <typeSymbol>#.</typeSymbol>
                  <typeName>float</typeName>
                </type>
                <name>xLocation</name>
              </parameter>
              
              <parameter>
                <type>
                  <typeSymbol>#.</typeSymbol>
                  <typeName>float</typeName>
                </type>
                <name>yLocation</name>
              </parameter>
              
              <parameter>
                <type>
                  <typeSymbol>$</typeSymbol>
                  <typeName>string</typeName>
                </type>
                <name>labelForUI</name>
              </parameter>


            </parameters>
            <name>updateDisplay       <return-type>∅</return-type>      </name>
            <documentation>Updates the UI element's position and label.</documentation>
            <codeBody>
              <statement>
                <expression>
                <functionCall>
                  <typeSymbol>ƒ</typeSymbol>
                  <name>setPosition</name>
                  <parameters>
                    <parameter>
                      <type>
                        <typeSymbol>#.</typeSymbol>
                        <typeName>float</typeName>
                      </type>
                      <name>xLocation</name>
                    </parameter>
                    <parameter>
                      <type>
                        <typeSymbol>#.</typeSymbol>
                        <typeName>float</typeName>
                      </type>
                      <name>yLocation</name>
                    </parameter>
                    
                    
                  </parameters>
                </functionCall>
                </expression>
              </statement>
              
              <statement>
                <expression>
                  <functionCall>
                    <typeSymbol>ƒ</typeSymbol>
                    <name>setLabel</name>
                    <parameters>
                      <parameter>
                        <typeSymbol>$</typeSymbol>
                        <typeName>string</typeName>
                        <name>labelForUI</name>
                      </parameter>
                    </parameters>
                  </functionCall>
                  </expression>
              </statement>
              <statement>
                <expression>
                  <functionCall>
                    <typeSymbol>ƒ</typeSymbol>
                    <name>setBackgroundColor</name>
                    <parameters>
                      <parameter>
                        <type>
                          <typeSymbol>$</typeSymbol>
                          <typeName>string</typeName>
                        </type>
                        <name>color</name>
                      </parameter>
                    </parameters>
                  </functionCall>
                </expression>
              </statement>
              
              <statement>
                <expression>
                  <functionCall>
                    <typeSymbol>ƒ</typeSymbol>
                    <name>setBorder</name>
                    <parameters>
                      <parameter>
                        <type>
                          <typeSymbol>#</typeSymbol>
                          <typeName>int</typeName>
                        </type>
                        <name>width</name>
                      </parameter>
                      <parameter>
                        <type>
                          <typeSymbol>$</typeSymbol>
                          <typeName>string</typeName>
                        </type>
                        <name>style</name>
                      </parameter>
                      <parameter>
                        <type>
                          <typeSymbol>$</typeSymbol>
                          <typeName>string</typeName>
                        </type>
                        <name>color</name>
                      </parameter>
                    </parameters>
                  </functionCall>
                </expression>
              </statement>
              
              <statement>
                <expression>
                  <functionCall>
                    <typeSymbol>ƒ</typeSymbol>
                    <name>setOpacity</name>
                    <parameters>
                      <parameter>
                        <type>
                          <typeSymbol>#.</typeSymbol>
                          <typeName>float</typeName>
                        </type>
                        <name>opacityLevel</name>
                      </parameter>
                    </parameters>
                  </functionCall>
                </expression>
              </statement>
              
              <statement>
                <expression>
                  <functionCall>
                    <typeSymbol>ƒ</typeSymbol>
                    <name>setFontSize</name>
                    <parameters>
                      <parameter>
                        <type>
                          <typeSymbol>#</typeSymbol>
                          <typeName>int</typeName>
                        </type>
                        <name>size</name>
                      </parameter>
                    </parameters>
                  </functionCall>
                </expression>
              </statement>
            </codeBody>
          </function>
          
          <variable>
            <name>buttons</name>
            <typeSymbol>guiArea</typeSymbol>
            <documentation>Calculator button layout and labels.</documentation>
            <guiArea>
              
              <gui-button is="gui-button">7</gui-button>
              <gui-button is="gui-button">8</gui-button>
              <gui-button is="gui-button">9</gui-button>
              <gui-button is="gui-button">÷</gui-button>
              <gui-button is="gui-button">4</gui-button>
              <gui-button is="gui-button">5</gui-button>
              <gui-button is="gui-button">6</gui-button>
              <gui-button is="gui-button">×</gui-button>
              <gui-button is="gui-button">1</gui-button>
              <gui-button is="gui-button">2</gui-button>
              <gui-button is="gui-button">3</gui-button>
              <gui-button is="gui-button">−</gui-button>
              <gui-button is="gui-button">0</gui-button>
              <gui-button is="gui-button">.</gui-button>
              <gui-button is="gui-button">=</gui-button>
              <gui-button is="gui-button">+</gui-button>
              <gui-button  is="gui-button" aria-label="clear">C</gui-button>
            
            </guiArea>
          </variable>
        </codebody>
    </class>

    <statement>
    <!-- Standalone Variable Declaration Demo -->
    <variable>
        <documentation>An integer variable used to index lists.</documentation>
        <typeSymbol>#</typeSymbol>
      <name>indexOfList</name>
      
    </variable>
  </statement>

</div>
</codeDocument> 
   
</codeProject>
    
</div>
<div id="output-tab-content" style="display:none;">
  <div id="output-viewport" >
    Program output will appear here.
  </div>
</div>
</div>



<div id="key-command-menu">
  <div style="font-weight:bold; margin-bottom:8px;">Key Commands</div>
  <div id="key-command-list"></div>


<div id="hover-info-menu">
  <!-- Populated by JS -->
</div>


<!-- Selection Info Menu -->
<div id="selection-info-menu">
  <div class="selection-info-header">Selection Info</div>
  <div id="selection-info-list"></div>
</div>

<!-- Include jQuery and jQuery UI -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>

<script src="scripts/nctbgpatterns.js"></script>
<script src="scripts/editor.js"></script>

<script>
  document.addEventListener('DOMContentLoaded', function() {

    bgPatterns.observe('codedocument', {
      preset: 'dotted',
      strokeColor: '#000',
      strokeWidth: 1,
      spacing: 4,
      angle: -45,
      backgroundColor: '#555'
    });

    bgPatterns.observe('body', {
  preset: 'diagonal-solid',
  strokeColor: '#222',
  strokeWidth: 2,
  spacing: 5,
  angle:0,
  backgroundColor: '#111'
});


    bgPatterns.observe('function > codebody', {
      "preset": "diagonal-solid",
  "angle": 90,
  "strokeColor": "#333",
  "strokeWidth": 1,
  "spacing": 3,
  "dashArray": "0",
  "backgroundColor": "black",
  "xOffset": 0,
  "yOffset": 0
    });

    

    


    bgPatterns.observe('class', {
      preset: 'cross-hatch',
      strokeColor: '#444',
      strokeWidth: 1,
      spacing: 5,
      angle: 45,
      backgroundColor: '#666'
    });
  
    bgPatterns.observe('group', {
      preset: 'cross-hatch',
      strokeColor: '#bdbdbd',
      strokeWidth: 1,
      spacing: 5,
      angle: 45,
      
      backgroundColor: '#727272'
    });
  
    bgPatterns.observe('function', {
      preset: 'diagonal-solid',
      strokeColor: '#e9ad5f',
      strokeWidth: 2,
      spacing: 3,
      angle:-35,
      backgroundColor: '#986300'
    });

    bgPatterns.observe('functioncall', {
      preset: 'diagonal-solid',
      strokeColor: '#e9ad5f',
      strokeWidth: 2,
      spacing: 3,
      angle:-35,
      backgroundColor: '#986300'
    });

    
  });
  </script>

<script>
$(document).ready(function(){
  // Place this after your DOM is ready
$(function() {
  // Initialize collapse state for all <function> elements
  $('function').each(function() {
    const $fn = $(this);
    const isCollapsed = $fn.attr('collapsed') === 'true';
    $fn.children('codebody').toggle(!isCollapsed);
  });

  
});

});

document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('codeBody').forEach(codeBody => {
    // Only wrap if not already wrapped
    if (!codeBody.querySelector('.sortable-container')) {
      const wrapper = document.createElement('div');
      wrapper.className = 'sortable-container';
      // Move all direct children into the wrapper
      Array.from(codeBody.children).forEach(child => wrapper.appendChild(child));
      codeBody.appendChild(wrapper);
    }
  });
});

$(function() {
  $('.sortable-container').sortable({
    items: '> *', // All direct children (your code elements)
    handle: '> name', // Drag by the <name> child if you want
    placeholder: "sortable-placeholder",
    update: function(event, ui) {
      // Optionally call your documentUIDidChange() or similar update routine here
      documentUIDidChange && documentUIDidChange();
    }
  });
});


</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const tabs = document.querySelectorAll('.project-tab');
    const codeContent = document.getElementById('code-tab-content');
    const outputContent = document.getElementById('output-tab-content');
    tabs.forEach(tab => {
      tab.addEventListener('click', function() {
        tabs.forEach(t => t.classList.remove('active'));
        this.classList.add('active');
        if (this.dataset.tab === 'code') {
          codeContent.style.display = '';
          outputContent.style.display = 'none';
        } else {
          codeContent.style.display = 'none';
          outputContent.style.display = '';
        }
      });
    });
  });
  </script>


<script>
  document.addEventListener('DOMContentLoaded', function() {
  // Place this after your DOM is ready
document.addEventListener('keydown', function(e) {
  // Build the shortcut string for this event
  let shortcut = '';
  if (e.ctrlKey) shortcut += '^';
  if (e.shiftKey) shortcut += '$';
  if (e.metaKey) shortcut += '@';
  if (e.altKey) shortcut += '~';
  // Use e.key for the key pressed (normalize to lower case for letters)
  let key = e.key;
  if (key.length === 1) key = key.toLowerCase();
  shortcut += key;

  // Find any element with matching kbshortcut
  const match = document.querySelector(`[kbshortcut="${shortcut}"]`);
  if (match) {
    // If it's a tab, trigger click
    match.click();
    e.preventDefault();
  }
});

});

function showKbShortcutsInTitles() {
  document.querySelectorAll('[kbshortcut]').forEach(el => {
    const shortcut = el.getAttribute('kbshortcut');
    if (!shortcut) return;
    // Human-readable version
    let label = shortcut
      .replace(/\^/g, 'Ctrl+')
      .replace(/\$/g, 'Shift+')
      .replace(/@/g, 'Cmd+')
      .replace(/~/g, 'Opt+');
    // Add to title (tooltip)
    if (!el.title || !el.title.includes(label)) {
      el.title = (el.title ? el.title + ' ' : '') + `[${label}]`;
    }
    // If it's a button, append to its visible label (if not already present)
    if (el.tagName === 'BUTTON') {
      // Only add if not already present
      if (!el.textContent.includes(`[${label}]`)) {
        el.textContent = el.textContent.trim() + ` [${label}]`;
      }
    }
  });
}
// Call after DOM is ready
document.addEventListener('DOMContentLoaded', showKbShortcutsInTitles);

document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('typeSymbol').forEach(ts => {
    const txt = ts.textContent.trim();
    if (txt === '#') {
      ts.style.backgroundColor = 'green';
      ts.style.color = 'black';
    } else if (txt === '#.') {
      ts.style.backgroundColor = '#326ba8';
      ts.style.color = 'black';
    }
    else if (txt === '$') {
      ts.style.backgroundColor = 'purple';
      ts.style.color = 'black';
    }
  });
});
</script>



   </body> </html>